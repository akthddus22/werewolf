{"ast":null,"code":"import _taggedTemplateLiteral from \"/mnt/c/Users/akthd/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/werewolf/werewolf/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"/mnt/c/Users/akthd/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/werewolf/werewolf/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/mnt/c/Users/akthd/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/werewolf/werewolf/front/src/components/useAbility.jsx\",\n  _templateObject;\nimport styled from \"styled-components\";\nimport React, { useState, useCallback, useEffect } from 'react';\nimport Modal from 'react-modal';\nimport { socket, SocketContext, SOCKET_EVENT } from \"./../service/socket\";\nvar NIGHT_JOB = {\n  WEREWOLF: \"NIGHT_WEREWOLF\",\n  ORACLE: \"NIGHT_ORACLE\",\n  ROBBER: \"NIGHT_ROBBER\",\n  TROUBLEMAKER: \"NIGHT_TROUBLEMAKER\",\n  CITIZEN: \"NIGHT_CITIZEN\",\n  NULL: \"NIGHT_NULL\"\n};\nvar DAY_JOB = {\n  WEREWOLF: \"DAY_WEREWOLF\",\n  ORACLE: \"DAY_ORACLE\",\n  ROBBER: \"DAY_ROBBER\",\n  TROUBLEMAKER: \"DAY_TROUBLEMAKER\",\n  CITIZEN: \"DAY_CITIZEN\",\n  NULL: \"DAY_NULL\"\n};\nfunction UseAbility() {\n  var _this = this;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    modalIsOpen = _useState2[0],\n    setModalIsOpen = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    id_nickname = _useState4[0],\n    set_id_nickname = _useState4[1];\n  var _useState5 = useState(function (id) {}),\n    _useState6 = _slicedToArray(_useState5, 2),\n    handler = _useState6[0],\n    set_handler = _useState6[1];\n  var robberAbility = function robberAbility(id) {\n    console.log(\"Used robber ability.\");\n    socket.emit(SOCKET_EVENT.ROBBER, {\n      id: id\n    });\n  };\n  var id_list = [];\n  var troublemakerAbility = function troublemakerAbility(id) {\n    console.log(\"Used Troublemaker ability.\");\n    id_list.push(id);\n    if (id_list.length == 2) {\n      socket.emit(SOCKET_EVENT.TROUBLEMAKER, {\n        id_list: id_list\n      });\n      id_list = [];\n    }\n  };\n  var noneAbility = function noneAbility(id) {};\n  var handleJobReceive = function handleJobReceive(_ref) {\n    var job = _ref.job,\n      data = _ref.data;\n    set_id_nickname(data);\n    console.log(\"Your job is \".concat(job, \".\"));\n    console.log(\"obj: %o\", data);\n    switch (job) {\n      case NIGHT_JOB.ROBBER:\n        console.log(\"handler set to robber.\");\n        set_handler(robberAbility);\n      case NIGHT_JOB.TROUBLEMAKER:\n        console.log(\"handler set to troublemaker.\");\n        set_handler(troublemakerAbility);\n      default:\n        set_handler(noneAbility);\n    }\n\n    //socket.removeAllListeners(SOCKET_EVENT.JOIN_JOB);\n  };\n\n  useEffect(function () {\n    socket.on(SOCKET_EVENT.JOIN_JOB, handleJobReceive);\n    return function () {};\n  }, [socket, handleJobReceive]);\n\n  /*{for (let key of id_nickname.keys()) {\r\n    return (\r\n      <div>\r\n        <StyledButton onClick={handler(id)}>{nickname}</StyledButton>\r\n      </div>\r\n    );\r\n  }}*/\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(StyledButton, {\n    onClick: function onClick() {\n      return setModalIsOpen(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, \"Modal Open\"), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modalIsOpen,\n    onRequestClose: function onRequestClose() {\n      return setModalIsOpen(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 4\n    }\n  }, id_nickname.map(function (obj) {\n    return /*#__PURE__*/React.createElement(StyledButton, {\n      onClick: function onClick() {\n        return handler(obj.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }\n    }, obj.nickname);\n  })));\n}\nvar StyledButton = styled.button(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  margin: 0;\\n  border: none;\\n  cursor: pointer;\\n  font-family: \\\"Noto Sans KR\\\", sans-serif;\\n  font-size: var(--button-font-size, 1rem);\\n  padding: var(--button-padding, 12px 16px);\\n  border-radius: var(--button-radius, 8px);\\n  background: var(--button-bg-color, #0d6efd);\\n  color: var(--button-color, #ffffff);\\n\\n  &:active,\\n  &:hover,\\n  &:focus {\\n    background: var(--button-hover-bg-color, #025ce2);\\n  }\\n\\n  &:disabled {\\n    cursor: default;\\n    opacity: 0.5;\\n    background: var(--button-bg-color, #025ce2);\\n  }\\n\"])));\nexport default UseAbility;","map":{"version":3,"names":["styled","React","useState","useCallback","useEffect","Modal","socket","SocketContext","SOCKET_EVENT","NIGHT_JOB","WEREWOLF","ORACLE","ROBBER","TROUBLEMAKER","CITIZEN","NULL","DAY_JOB","UseAbility","_this","_useState","_useState2","_slicedToArray","modalIsOpen","setModalIsOpen","_useState3","_useState4","id_nickname","set_id_nickname","_useState5","id","_useState6","handler","set_handler","robberAbility","console","log","emit","id_list","troublemakerAbility","push","length","noneAbility","handleJobReceive","_ref","job","data","concat","on","JOIN_JOB","createElement","Fragment","StyledButton","onClick","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","isOpen","onRequestClose","map","obj","nickname","button","_templateObject","_taggedTemplateLiteral"],"sources":["/mnt/c/Users/akthd/OneDrive/바탕 화면/werewolf/werewolf/front/src/components/useAbility.jsx"],"sourcesContent":["import styled from \"styled-components\";\r\nimport React, { useState, useCallback, useEffect } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { socket, SocketContext, SOCKET_EVENT } from \"./../service/socket\";\r\n\r\nconst NIGHT_JOB = {\r\n  WEREWOLF: \"NIGHT_WEREWOLF\",\r\n  ORACLE: \"NIGHT_ORACLE\",\r\n  ROBBER: \"NIGHT_ROBBER\",\r\n  TROUBLEMAKER: \"NIGHT_TROUBLEMAKER\",\r\n  CITIZEN: \"NIGHT_CITIZEN\",\r\n  NULL: \"NIGHT_NULL\",\r\n}\r\n\r\nconst DAY_JOB = {\r\n  WEREWOLF: \"DAY_WEREWOLF\",\r\n  ORACLE: \"DAY_ORACLE\",\r\n  ROBBER: \"DAY_ROBBER\",\r\n  TROUBLEMAKER: \"DAY_TROUBLEMAKER\",\r\n  CITIZEN: \"DAY_CITIZEN\",\r\n  NULL: \"DAY_NULL\",\r\n}\r\n\r\nfunction UseAbility() {\r\n  const [modalIsOpen, setModalIsOpen] = useState(false);\r\n  const [id_nickname, set_id_nickname] = useState([]);\r\n  const [handler, set_handler] = useState((id) => {});\r\n\r\n  \r\n\r\n  const robberAbility = id => {\r\n    console.log(`Used robber ability.`);\r\n    socket.emit(SOCKET_EVENT.ROBBER, {id: id});\r\n  };\r\n\r\n  let id_list = [];\r\n  const troublemakerAbility = id => {\r\n    console.log(`Used Troublemaker ability.`);\r\n    id_list.push(id);\r\n    if (id_list.length == 2) {\r\n      socket.emit(SOCKET_EVENT.TROUBLEMAKER, {id_list: id_list});\r\n      id_list = [];\r\n  }};\r\n\r\n  const noneAbility = id => {};\r\n\r\n  const handleJobReceive = ({job, data}) => {\r\n    set_id_nickname(data);\r\n    console.log(`Your job is ${job}.`);\r\n    console.log(\"obj: %o\", data);\r\n\r\n    switch (job) {\r\n      case NIGHT_JOB.ROBBER:\r\n        console.log(`handler set to robber.`);\r\n        set_handler(robberAbility);\r\n      case NIGHT_JOB.TROUBLEMAKER:\r\n        console.log(`handler set to troublemaker.`);\r\n        set_handler(troublemakerAbility);\r\n      default:\r\n        set_handler(noneAbility);\r\n    }\r\n\r\n    //socket.removeAllListeners(SOCKET_EVENT.JOIN_JOB);\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(SOCKET_EVENT.JOIN_JOB, handleJobReceive);\r\n    return (() => {})\r\n  }, [socket, handleJobReceive]);\r\n\r\n  /*{for (let key of id_nickname.keys()) {\r\n    return (\r\n      <div>\r\n        <StyledButton onClick={handler(id)}>{nickname}</StyledButton>\r\n      </div>\r\n    );\r\n  }}*/\r\n\r\n  \r\n  return (\r\n    <>\r\n    <StyledButton onClick={()=> setModalIsOpen(true)}>Modal Open</StyledButton>\r\n  \r\n\t  <Modal isOpen={modalIsOpen} onRequestClose={() => setModalIsOpen(false)}>\r\n      \r\n        {id_nickname.map((obj) => {\r\n          return (\r\n            <StyledButton onClick={() => handler(obj.id)}>{obj.nickname}</StyledButton>\r\n          );\r\n        })}\r\n      \r\n    </Modal>\r\n    \r\n    </>\r\n  );\r\n}\r\n\r\nconst StyledButton = styled.button`\r\n  margin: 0;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-family: \"Noto Sans KR\", sans-serif;\r\n  font-size: var(--button-font-size, 1rem);\r\n  padding: var(--button-padding, 12px 16px);\r\n  border-radius: var(--button-radius, 8px);\r\n  background: var(--button-bg-color, #0d6efd);\r\n  color: var(--button-color, #ffffff);\r\n\r\n  &:active,\r\n  &:hover,\r\n  &:focus {\r\n    background: var(--button-hover-bg-color, #025ce2);\r\n  }\r\n\r\n  &:disabled {\r\n    cursor: default;\r\n    opacity: 0.5;\r\n    background: var(--button-bg-color, #025ce2);\r\n  }\r\n`;\r\n\r\nexport default UseAbility;"],"mappings":"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"},"metadata":{},"sourceType":"module"}