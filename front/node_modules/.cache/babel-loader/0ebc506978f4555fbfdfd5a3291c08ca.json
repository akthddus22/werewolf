{"ast":null,"code":"import { createContext } from \"react\";\nimport socketIo from \"socket.io-client\";\nimport dayjs from \"dayjs\";\nexport var SOCKET_EVENT = {\n  JOIN_ROOM: \"JOIN_ROOM\",\n  UPDATE_NICKNAME: \"UPDATE_NICKNAME\",\n  SEND_MESSAGE: \"SEND_MESSAGE\",\n  RECEIVE_MESSAGE: \"RECEIVE_MESSAGE\",\n  START_GAME: \"START_GAME\"\n};\nexport var socket = socketIo(String(process.env.REACT_APP_BACK_URL));\nexport var SocketContext = createContext(socket);\nexport var makeMessage = function makeMessage(pongData) {\n  var prevNickname = pongData.prevNickname,\n    nickname = pongData.nickname,\n    content = pongData.content,\n    type = pongData.type,\n    time = pongData.time;\n  var nicknameLabel;\n  var contentLabel = \"\";\n  switch (type) {\n    case SOCKET_EVENT.JOIN_ROOM:\n      {\n        contentLabel = \"\".concat(nickname, \" has join the room.\");\n        break;\n      }\n    case SOCKET_EVENT.UPDATE_NICKNAME:\n      {\n        contentLabel = \"User's name has been changed.\\n\".concat(prevNickname, \" => \").concat(nickname, \".\");\n        break;\n      }\n    case SOCKET_EVENT.SEND_MESSAGE:\n      {\n        contentLabel = String(content);\n        nicknameLabel = nickname;\n        break;\n      }\n    default:\n  }\n  return {\n    nickname: nicknameLabel,\n    content: contentLabel,\n    time: dayjs(time).format(\"HH:mm\")\n  };\n};\nsocket.on(\"connect\", function () {\n  console.log(\"socket server connected.\");\n});\nsocket.on(\"disconnect\", function () {\n  console.log(\"socket server disconnected.\");\n});","map":{"version":3,"names":["createContext","socketIo","dayjs","SOCKET_EVENT","JOIN_ROOM","UPDATE_NICKNAME","SEND_MESSAGE","RECEIVE_MESSAGE","START_GAME","socket","String","process","env","REACT_APP_BACK_URL","SocketContext","makeMessage","pongData","prevNickname","nickname","content","type","time","nicknameLabel","contentLabel","concat","format","on","console","log"],"sources":["/mnt/c/Users/akthd/OneDrive/바탕 화면/werewolf/werewolf/front/src/service/socket.js"],"sourcesContent":["import { createContext } from \"react\";\r\nimport socketIo from \"socket.io-client\";\r\nimport dayjs from \"dayjs\";\r\n\r\nexport const SOCKET_EVENT = {\r\n    JOIN_ROOM: \"JOIN_ROOM\",\r\n    UPDATE_NICKNAME: \"UPDATE_NICKNAME\",\r\n    SEND_MESSAGE: \"SEND_MESSAGE\",\r\n    RECEIVE_MESSAGE: \"RECEIVE_MESSAGE\",\r\n    START_GAME: \"START_GAME\",\r\n};\r\n\r\nexport const socket = socketIo(String(process.env.REACT_APP_BACK_URL));\r\nexport const SocketContext = createContext(socket);\r\n\r\nexport const makeMessage = pongData => {\r\n    const { prevNickname, nickname, content, type, time } = pongData;\r\n\r\n    let nicknameLabel;\r\n    let contentLabel=\"\";\r\n\r\n    switch (type) {\r\n        case SOCKET_EVENT.JOIN_ROOM: {\r\n            contentLabel = `${nickname} has join the room.`;\r\n            break;\r\n        }\r\n        case SOCKET_EVENT.UPDATE_NICKNAME: {\r\n            contentLabel = `User's name has been changed.\\n${prevNickname} => ${nickname}.`\r\n            break;\r\n        }\r\n        case SOCKET_EVENT.SEND_MESSAGE: {\r\n            contentLabel = String(content);\r\n            nicknameLabel = nickname;\r\n            break;\r\n        }\r\n        default:\r\n    }\r\n\r\n    return {\r\n        nickname: nicknameLabel,\r\n        content: contentLabel,\r\n        time: dayjs(time).format(\"HH:mm\"),\r\n    }\r\n}\r\n\r\nsocket.on(\"connect\", () => {\r\n  console.log(\"socket server connected.\");\r\n});\r\n\r\nsocket.on(\"disconnect\", () => {\r\n  console.log(\"socket server disconnected.\");\r\n});"],"mappings":"AAAA,SAASA,aAAa,QAAQ,OAAO;AACrC,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAO,IAAMC,YAAY,GAAG;EACxBC,SAAS,EAAE,WAAW;EACtBC,eAAe,EAAE,iBAAiB;EAClCC,YAAY,EAAE,cAAc;EAC5BC,eAAe,EAAE,iBAAiB;EAClCC,UAAU,EAAE;AAChB,CAAC;AAED,OAAO,IAAMC,MAAM,GAAGR,QAAQ,CAACS,MAAM,CAACC,OAAO,CAACC,GAAG,CAACC,kBAAkB,CAAC,CAAC;AACtE,OAAO,IAAMC,aAAa,GAAGd,aAAa,CAACS,MAAM,CAAC;AAElD,OAAO,IAAMM,WAAW,GAAG,SAAdA,WAAWA,CAAGC,QAAQ,EAAI;EAAA,IAC3BC,YAAY,GAAoCD,QAAQ,CAAxDC,YAAY;IAAEC,QAAQ,GAA0BF,QAAQ,CAA1CE,QAAQ;IAAEC,OAAO,GAAiBH,QAAQ,CAAhCG,OAAO;IAAEC,IAAI,GAAWJ,QAAQ,CAAvBI,IAAI;IAAEC,IAAI,GAAKL,QAAQ,CAAjBK,IAAI;EAEnD,IAAIC,aAAa;EACjB,IAAIC,YAAY,GAAC,EAAE;EAEnB,QAAQH,IAAI;IACR,KAAKjB,YAAY,CAACC,SAAS;MAAE;QACzBmB,YAAY,MAAAC,MAAA,CAAMN,QAAQ,wBAAqB;QAC/C;MACJ;IACA,KAAKf,YAAY,CAACE,eAAe;MAAE;QAC/BkB,YAAY,qCAAAC,MAAA,CAAqCP,YAAY,UAAAO,MAAA,CAAON,QAAQ,MAAG;QAC/E;MACJ;IACA,KAAKf,YAAY,CAACG,YAAY;MAAE;QAC5BiB,YAAY,GAAGb,MAAM,CAACS,OAAO,CAAC;QAC9BG,aAAa,GAAGJ,QAAQ;QACxB;MACJ;IACA;EACJ;EAEA,OAAO;IACHA,QAAQ,EAAEI,aAAa;IACvBH,OAAO,EAAEI,YAAY;IACrBF,IAAI,EAAEnB,KAAK,CAACmB,IAAI,CAAC,CAACI,MAAM,CAAC,OAAO;EACpC,CAAC;AACL,CAAC;AAEDhB,MAAM,CAACiB,EAAE,CAAC,SAAS,EAAE,YAAM;EACzBC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;AACzC,CAAC,CAAC;AAEFnB,MAAM,CAACiB,EAAE,CAAC,YAAY,EAAE,YAAM;EAC5BC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;AAC5C,CAAC,CAAC"},"metadata":{},"sourceType":"module"}