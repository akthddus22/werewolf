{"ast":null,"code":"import _taggedTemplateLiteral from \"/mnt/c/Users/akthd/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/werewolf/werewolf/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"/mnt/c/Users/akthd/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/werewolf/werewolf/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/mnt/c/Users/akthd/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/werewolf/werewolf/front/src/components/useAbility.jsx\",\n  _templateObject;\nimport styled from \"styled-components\";\nimport React, { useState, useCallback, useEffect } from 'react';\nimport Modal from 'react-modal';\nimport { socket, SocketContext, SOCKET_EVENT } from \"./../service/socket\";\nvar NIGHT_JOB = {\n  WEREWOLF: \"NIGHT_WEREWOLF\",\n  ORACLE: \"NIGHT_ORACLE\",\n  ROBBER: \"NIGHT_ROBBER\",\n  TROUBLEMAKER: \"NIGHT_TROUBLEMAKER\",\n  CITIZEN: \"NIGHT_CITIZEN\",\n  NULL: \"NIGHT_NULL\"\n};\nvar DAY_JOB = {\n  WEREWOLF: \"DAY_WEREWOLF\",\n  ORACLE: \"DAY_ORACLE\",\n  ROBBER: \"DAY_ROBBER\",\n  TROUBLEMAKER: \"DAY_TROUBLEMAKER\",\n  CITIZEN: \"DAY_CITIZEN\",\n  NULL: \"DAY_NULL\"\n};\nfunction UseAbility() {\n  var _this = this;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    modalIsOpen = _useState2[0],\n    setModalIsOpen = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    id_nickname = _useState4[0],\n    set_id_nickname = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    job = _useState6[0],\n    set_job = _useState6[1];\n  var id_list = [];\n  var ability = function ability(_ref) {\n    var job = _ref.job,\n      id = _ref.id;\n    switch (job) {\n      case NIGHT_JOB.ROBBER:\n        console.log(\"Used robber ability.\");\n        socket.emit(SOCKET_EVENT.ROBBER, {\n          id: id\n        });\n      case NIGHT_JOB.TROUBLEMAKER:\n        console.log(\"Used troublemaker ability.\");\n        id_list.push(id);\n        if (id_list.length == 2) {\n          socket.emit(SOCKER_EVENT.TROUBLEMAKER, {\n            id_list: id_list\n          });\n          id_list = [];\n        }\n      default:\n        console.log(\"Used none ability.\");\n    }\n  };\n  var handleJobReceive = function handleJobReceive(_ref2) {\n    var job = _ref2.job,\n      data = _ref2.data;\n    set_id_nickname(data);\n    set_job(job);\n    console.log(\"Your job is \".concat(job, \".\"));\n    console.log(\"obj: %o\", data);\n    socket.removeAllListeners(SOCKET_EVENT.JOIN_JOB);\n  };\n  useEffect(function () {\n    socket.on(SOCKET_EVENT.JOIN_JOB, handleJobReceive);\n    return function () {};\n  }, [socket, handleJobReceive]);\n\n  /*{for (let key of id_nickname.keys()) {\r\n    return (\r\n      <div>\r\n        <StyledButton onClick={handler(id)}>{nickname}</StyledButton>\r\n      </div>\r\n    );\r\n  }}*/\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(StyledButton, {\n    onClick: function onClick() {\n      return setModalIsOpen(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, \"Modal Open\"), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modalIsOpen,\n    onRequestClose: function onRequestClose() {\n      return setModalIsOpen(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 4\n    }\n  }, id_nickname.map(function (obj) {\n    return /*#__PURE__*/React.createElement(StyledButton, {\n      onClick: function onClick() {\n        return ability({\n          job: job,\n          id: obj.id\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, obj.nickname);\n  })));\n}\nvar StyledButton = styled.button(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  margin: 0;\\n  border: none;\\n  cursor: pointer;\\n  font-family: \\\"Noto Sans KR\\\", sans-serif;\\n  font-size: var(--button-font-size, 1rem);\\n  padding: var(--button-padding, 12px 16px);\\n  border-radius: var(--button-radius, 8px);\\n  background: var(--button-bg-color, #0d6efd);\\n  color: var(--button-color, #ffffff);\\n\\n  &:active,\\n  &:hover,\\n  &:focus {\\n    background: var(--button-hover-bg-color, #025ce2);\\n  }\\n\\n  &:disabled {\\n    cursor: default;\\n    opacity: 0.5;\\n    background: var(--button-bg-color, #025ce2);\\n  }\\n\"])));\nexport default UseAbility;","map":{"version":3,"names":["styled","React","useState","useCallback","useEffect","Modal","socket","SocketContext","SOCKET_EVENT","NIGHT_JOB","WEREWOLF","ORACLE","ROBBER","TROUBLEMAKER","CITIZEN","NULL","DAY_JOB","UseAbility","_this","_useState","_useState2","_slicedToArray","modalIsOpen","setModalIsOpen","_useState3","_useState4","id_nickname","set_id_nickname","_useState5","_useState6","job","set_job","id_list","ability","_ref","id","console","log","emit","push","length","SOCKER_EVENT","handleJobReceive","_ref2","data","concat","removeAllListeners","JOIN_JOB","on","createElement","Fragment","StyledButton","onClick","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","isOpen","onRequestClose","map","obj","nickname","button","_templateObject","_taggedTemplateLiteral"],"sources":["/mnt/c/Users/akthd/OneDrive/바탕 화면/werewolf/werewolf/front/src/components/useAbility.jsx"],"sourcesContent":["import styled from \"styled-components\";\r\nimport React, { useState, useCallback, useEffect } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { socket, SocketContext, SOCKET_EVENT } from \"./../service/socket\";\r\n\r\nconst NIGHT_JOB = {\r\n  WEREWOLF: \"NIGHT_WEREWOLF\",\r\n  ORACLE: \"NIGHT_ORACLE\",\r\n  ROBBER: \"NIGHT_ROBBER\",\r\n  TROUBLEMAKER: \"NIGHT_TROUBLEMAKER\",\r\n  CITIZEN: \"NIGHT_CITIZEN\",\r\n  NULL: \"NIGHT_NULL\",\r\n}\r\n\r\nconst DAY_JOB = {\r\n  WEREWOLF: \"DAY_WEREWOLF\",\r\n  ORACLE: \"DAY_ORACLE\",\r\n  ROBBER: \"DAY_ROBBER\",\r\n  TROUBLEMAKER: \"DAY_TROUBLEMAKER\",\r\n  CITIZEN: \"DAY_CITIZEN\",\r\n  NULL: \"DAY_NULL\",\r\n}\r\n\r\nfunction UseAbility() {\r\n  const [modalIsOpen, setModalIsOpen] = useState(false);\r\n  const [id_nickname, set_id_nickname] = useState([]);\r\n  const [job, set_job] = useState(\"\");\r\n\r\n  \r\n\r\n  \r\n\r\n  let id_list = [];\r\n  const ability = ({job, id}) => {\r\n    switch (job) {\r\n      case NIGHT_JOB.ROBBER:\r\n        console.log(`Used robber ability.`);\r\n        socket.emit(SOCKET_EVENT.ROBBER, {id: id});\r\n\r\n      case NIGHT_JOB.TROUBLEMAKER:\r\n        console.log(`Used troublemaker ability.`);\r\n        id_list.push(id);\r\n        if (id_list.length == 2) {\r\n          socket.emit(SOCKER_EVENT.TROUBLEMAKER, {id_list: id_list});\r\n          id_list = [];\r\n        }\r\n\r\n      default:\r\n        console.log(`Used none ability.`);\r\n    }\r\n  }\r\n\r\n  const handleJobReceive = ({job, data}) => {\r\n    set_id_nickname(data);\r\n    set_job(job);\r\n    console.log(`Your job is ${job}.`);\r\n    console.log(\"obj: %o\", data);\r\n\r\n    socket.removeAllListeners(SOCKET_EVENT.JOIN_JOB);\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(SOCKET_EVENT.JOIN_JOB, handleJobReceive);\r\n    return (() => {})\r\n  }, [socket, handleJobReceive]);\r\n\r\n  /*{for (let key of id_nickname.keys()) {\r\n    return (\r\n      <div>\r\n        <StyledButton onClick={handler(id)}>{nickname}</StyledButton>\r\n      </div>\r\n    );\r\n  }}*/\r\n\r\n  \r\n  return (\r\n    <>\r\n    <StyledButton onClick={()=> setModalIsOpen(true)}>Modal Open</StyledButton>\r\n  \r\n\t  <Modal isOpen={modalIsOpen} onRequestClose={() => setModalIsOpen(false)}>\r\n      \r\n        {id_nickname.map((obj) => {\r\n          return (\r\n            <StyledButton onClick={() => ability({job: job, id: obj.id})}>{obj.nickname}</StyledButton>\r\n          );\r\n        })}\r\n      \r\n    </Modal>\r\n    \r\n    </>\r\n  );\r\n}\r\n\r\nconst StyledButton = styled.button`\r\n  margin: 0;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-family: \"Noto Sans KR\", sans-serif;\r\n  font-size: var(--button-font-size, 1rem);\r\n  padding: var(--button-padding, 12px 16px);\r\n  border-radius: var(--button-radius, 8px);\r\n  background: var(--button-bg-color, #0d6efd);\r\n  color: var(--button-color, #ffffff);\r\n\r\n  &:active,\r\n  &:hover,\r\n  &:focus {\r\n    background: var(--button-hover-bg-color, #025ce2);\r\n  }\r\n\r\n  &:disabled {\r\n    cursor: default;\r\n    opacity: 0.5;\r\n    background: var(--button-bg-color, #025ce2);\r\n  }\r\n`;\r\n\r\nexport default UseAbility;"],"mappings":"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"},"metadata":{},"sourceType":"module"}