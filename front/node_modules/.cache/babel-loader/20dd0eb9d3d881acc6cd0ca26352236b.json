{"ast":null,"code":"import _taggedTemplateLiteral from \"/mnt/c/Users/akthd/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/werewolf/werewolf/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"/mnt/c/Users/akthd/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/werewolf/werewolf/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/mnt/c/Users/akthd/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/werewolf/werewolf/front/src/components/useAbility.jsx\",\n  _templateObject;\nimport styled from \"styled-components\";\nimport React, { useState, useCallback, useEffect } from 'react';\nimport Modal from 'react-modal';\nimport { socket, SocketContext, SOCKET_EVENT } from \"./../service/socket\";\nvar NIGHT_JOB = {\n  WEREWOLF: \"NIGHT_WEREWOLF\",\n  ORACLE: \"NIGHT_ORACLE\",\n  ROBBER: \"NIGHT_ROBBER\",\n  TROUBLEMAKER: \"NIGHT_TROUBLEMAKER\",\n  CITIZEN: \"NIGHT_CITIZEN\",\n  NULL: \"NIGHT_NULL\"\n};\nvar DAY_JOB = {\n  WEREWOLF: \"DAY_WEREWOLF\",\n  ORACLE: \"DAY_ORACLE\",\n  ROBBER: \"DAY_ROBBER\",\n  TROUBLEMAKER: \"DAY_TROUBLEMAKER\",\n  CITIZEN: \"DAY_CITIZEN\",\n  NULL: \"DAY_NULL\"\n};\nfunction UseAbility() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    modalIsOpen = _useState2[0],\n    setModalIsOpen = _useState2[1];\n  var _useState3 = useState({\n      data: new Map()\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    id_nickname = _useState4[0],\n    set_id_nickname = _useState4[1];\n  var robberAbility = function robberAbility(id) {\n    socket.emit(SOCKET_EVENT.ROBBER, {\n      id: id\n    });\n  };\n  var id_list = [];\n  var troublemakerAbility = function troublemakerAbility(id) {\n    id_list.push(id);\n    if (id_list.length == 2) {\n      socket.emit(SOCKET_EVENT.TROUBLEMAKER, {\n        id_list: id_list\n      });\n      id_list = [];\n    }\n  };\n  var noneAbility = function noneAbility(id) {};\n  var handler = noneAbility;\n  var handleJobReceive = function handleJobReceive(pongData) {\n    var job = pongData.j;\n    var data = pongData.id_nickname;\n    set_id_nickname({\n      data: data\n    });\n    console.log(\"Your job is \".concat(job, \".\"));\n    console.log(\"You received \".concat(JSON.stringify(data), \".\"));\n    switch (job) {\n      case NIGHT_JOB.ROBBER:\n        handler = robberAbility;\n      case NIGHT_JOB.TROUBLEMAKER:\n        handler = troublemakerAbility;\n      default:\n        handler = noneAbility;\n    }\n\n    //socket.removeAllListeners(SOCKET_EVENT.JOIN_JOB);\n  };\n\n  useEffect(function () {\n    socket.on(SOCKET_EVENT.JOIN_JOB, handleJobReceive);\n    return function () {};\n  }, [socket, handleJobReceive]);\n\n  /*{for (let key of id_nickname.keys()) {\r\n    return (\r\n      <div>\r\n        <StyledButton onClick={handler(id)}>{nickname}</StyledButton>\r\n      </div>\r\n    );\r\n  }}*/\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(StyledButton, {\n    onClick: function onClick() {\n      return setModalIsOpen(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, \"Modal Open\"), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modalIsOpen,\n    onRequestClose: function onRequestClose() {\n      return setModalIsOpen(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 4\n    }\n  }, \"aa\"));\n}\nvar StyledButton = styled.button(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  margin: 0;\\n  border: none;\\n  cursor: pointer;\\n  font-family: \\\"Noto Sans KR\\\", sans-serif;\\n  font-size: var(--button-font-size, 1rem);\\n  padding: var(--button-padding, 12px 16px);\\n  border-radius: var(--button-radius, 8px);\\n  background: var(--button-bg-color, #0d6efd);\\n  color: var(--button-color, #ffffff);\\n\\n  &:active,\\n  &:hover,\\n  &:focus {\\n    background: var(--button-hover-bg-color, #025ce2);\\n  }\\n\\n  &:disabled {\\n    cursor: default;\\n    opacity: 0.5;\\n    background: var(--button-bg-color, #025ce2);\\n  }\\n\"])));\nexport default UseAbility;","map":{"version":3,"names":["styled","React","useState","useCallback","useEffect","Modal","socket","SocketContext","SOCKET_EVENT","NIGHT_JOB","WEREWOLF","ORACLE","ROBBER","TROUBLEMAKER","CITIZEN","NULL","DAY_JOB","UseAbility","_useState","_useState2","_slicedToArray","modalIsOpen","setModalIsOpen","_useState3","data","Map","_useState4","id_nickname","set_id_nickname","robberAbility","id","emit","id_list","troublemakerAbility","push","length","noneAbility","handler","handleJobReceive","pongData","job","j","console","log","concat","JSON","stringify","on","JOIN_JOB","createElement","Fragment","StyledButton","onClick","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","isOpen","onRequestClose","button","_templateObject","_taggedTemplateLiteral"],"sources":["/mnt/c/Users/akthd/OneDrive/바탕 화면/werewolf/werewolf/front/src/components/useAbility.jsx"],"sourcesContent":["import styled from \"styled-components\";\r\nimport React, { useState, useCallback, useEffect } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { socket, SocketContext, SOCKET_EVENT } from \"./../service/socket\";\r\n\r\nconst NIGHT_JOB = {\r\n  WEREWOLF: \"NIGHT_WEREWOLF\",\r\n  ORACLE: \"NIGHT_ORACLE\",\r\n  ROBBER: \"NIGHT_ROBBER\",\r\n  TROUBLEMAKER: \"NIGHT_TROUBLEMAKER\",\r\n  CITIZEN: \"NIGHT_CITIZEN\",\r\n  NULL: \"NIGHT_NULL\",\r\n}\r\n\r\nconst DAY_JOB = {\r\n  WEREWOLF: \"DAY_WEREWOLF\",\r\n  ORACLE: \"DAY_ORACLE\",\r\n  ROBBER: \"DAY_ROBBER\",\r\n  TROUBLEMAKER: \"DAY_TROUBLEMAKER\",\r\n  CITIZEN: \"DAY_CITIZEN\",\r\n  NULL: \"DAY_NULL\",\r\n}\r\n\r\nfunction UseAbility() {\r\n  const [modalIsOpen, setModalIsOpen] = useState(false);\r\n  const [id_nickname, set_id_nickname] = useState({data: new Map()});\r\n\r\n  \r\n\r\n  const robberAbility = id => {\r\n    socket.emit(SOCKET_EVENT.ROBBER, {id: id});\r\n  };\r\n\r\n  let id_list = [];\r\n  const troublemakerAbility = id => {\r\n    id_list.push(id);\r\n    if (id_list.length == 2) {\r\n      socket.emit(SOCKET_EVENT.TROUBLEMAKER, {id_list: id_list});\r\n      id_list = [];\r\n  }};\r\n\r\n  const noneAbility = id => {};\r\n\r\n  let handler = noneAbility;\r\n  const handleJobReceive = pongData => {\r\n    const job = pongData.j;\r\n    const data = pongData.id_nickname;\r\n    set_id_nickname({data: data});\r\n    console.log(`Your job is ${job}.`);\r\n    console.log(`You received ${JSON.stringify(data)}.`);\r\n\r\n    switch (job) {\r\n      case NIGHT_JOB.ROBBER:\r\n        handler = robberAbility;\r\n      case NIGHT_JOB.TROUBLEMAKER:\r\n        handler = troublemakerAbility;\r\n      default:\r\n        handler = noneAbility;\r\n    }\r\n\r\n    //socket.removeAllListeners(SOCKET_EVENT.JOIN_JOB);\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(SOCKET_EVENT.JOIN_JOB, handleJobReceive);\r\n    return (() => {})\r\n  }, [socket, handleJobReceive]);\r\n\r\n  /*{for (let key of id_nickname.keys()) {\r\n    return (\r\n      <div>\r\n        <StyledButton onClick={handler(id)}>{nickname}</StyledButton>\r\n      </div>\r\n    );\r\n  }}*/\r\n\r\n  \r\n  return (\r\n    <>\r\n    <StyledButton onClick={()=> setModalIsOpen(true)}>Modal Open</StyledButton>\r\n  \r\n\t  <Modal isOpen={modalIsOpen} onRequestClose={() => setModalIsOpen(false)}>\r\n      \r\n        aa\r\n      \r\n    </Modal>\r\n    \r\n    </>\r\n  );\r\n}\r\n\r\nconst StyledButton = styled.button`\r\n  margin: 0;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-family: \"Noto Sans KR\", sans-serif;\r\n  font-size: var(--button-font-size, 1rem);\r\n  padding: var(--button-padding, 12px 16px);\r\n  border-radius: var(--button-radius, 8px);\r\n  background: var(--button-bg-color, #0d6efd);\r\n  color: var(--button-color, #ffffff);\r\n\r\n  &:active,\r\n  &:hover,\r\n  &:focus {\r\n    background: var(--button-hover-bg-color, #025ce2);\r\n  }\r\n\r\n  &:disabled {\r\n    cursor: default;\r\n    opacity: 0.5;\r\n    background: var(--button-bg-color, #025ce2);\r\n  }\r\n`;\r\n\r\nexport default UseAbility;"],"mappings":";;;;AAAA,OAAOA,MAAM,MAAM,mBAAmB;AACtC,OAAOC,KAAK,IAAIC,QAAQ,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAC/D,OAAOC,KAAK,MAAM,aAAa;AAC/B,SAASC,MAAM,EAAEC,aAAa,EAAEC,YAAY,QAAQ,qBAAqB;AAEzE,IAAMC,SAAS,GAAG;EAChBC,QAAQ,EAAE,gBAAgB;EAC1BC,MAAM,EAAE,cAAc;EACtBC,MAAM,EAAE,cAAc;EACtBC,YAAY,EAAE,oBAAoB;EAClCC,OAAO,EAAE,eAAe;EACxBC,IAAI,EAAE;AACR,CAAC;AAED,IAAMC,OAAO,GAAG;EACdN,QAAQ,EAAE,cAAc;EACxBC,MAAM,EAAE,YAAY;EACpBC,MAAM,EAAE,YAAY;EACpBC,YAAY,EAAE,kBAAkB;EAChCC,OAAO,EAAE,aAAa;EACtBC,IAAI,EAAE;AACR,CAAC;AAED,SAASE,UAAUA,CAAA,EAAG;EAAA,IAAAC,SAAA,GACkBhB,QAAQ,CAAC,KAAK,CAAC;IAAAiB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA9CG,WAAW,GAAAF,UAAA;IAAEG,cAAc,GAAAH,UAAA;EAAA,IAAAI,UAAA,GACKrB,QAAQ,CAAC;MAACsB,IAAI,EAAE,IAAIC,GAAG,CAAC;IAAC,CAAC,CAAC;IAAAC,UAAA,GAAAN,cAAA,CAAAG,UAAA;IAA3DI,WAAW,GAAAD,UAAA;IAAEE,eAAe,GAAAF,UAAA;EAInC,IAAMG,aAAa,GAAG,SAAhBA,aAAaA,CAAGC,EAAE,EAAI;IAC1BxB,MAAM,CAACyB,IAAI,CAACvB,YAAY,CAACI,MAAM,EAAE;MAACkB,EAAE,EAAEA;IAAE,CAAC,CAAC;EAC5C,CAAC;EAED,IAAIE,OAAO,GAAG,EAAE;EAChB,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAGH,EAAE,EAAI;IAChCE,OAAO,CAACE,IAAI,CAACJ,EAAE,CAAC;IAChB,IAAIE,OAAO,CAACG,MAAM,IAAI,CAAC,EAAE;MACvB7B,MAAM,CAACyB,IAAI,CAACvB,YAAY,CAACK,YAAY,EAAE;QAACmB,OAAO,EAAEA;MAAO,CAAC,CAAC;MAC1DA,OAAO,GAAG,EAAE;IAChB;EAAC,CAAC;EAEF,IAAMI,WAAW,GAAG,SAAdA,WAAWA,CAAGN,EAAE,EAAI,CAAC,CAAC;EAE5B,IAAIO,OAAO,GAAGD,WAAW;EACzB,IAAME,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAGC,QAAQ,EAAI;IACnC,IAAMC,GAAG,GAAGD,QAAQ,CAACE,CAAC;IACtB,IAAMjB,IAAI,GAAGe,QAAQ,CAACZ,WAAW;IACjCC,eAAe,CAAC;MAACJ,IAAI,EAAEA;IAAI,CAAC,CAAC;IAC7BkB,OAAO,CAACC,GAAG,gBAAAC,MAAA,CAAgBJ,GAAG,MAAG,CAAC;IAClCE,OAAO,CAACC,GAAG,iBAAAC,MAAA,CAAiBC,IAAI,CAACC,SAAS,CAACtB,IAAI,CAAC,MAAG,CAAC;IAEpD,QAAQgB,GAAG;MACT,KAAK/B,SAAS,CAACG,MAAM;QACnByB,OAAO,GAAGR,aAAa;MACzB,KAAKpB,SAAS,CAACI,YAAY;QACzBwB,OAAO,GAAGJ,mBAAmB;MAC/B;QACEI,OAAO,GAAGD,WAAW;IACzB;;IAEA;EACF,CAAC;;EAEDhC,SAAS,CAAC,YAAM;IACdE,MAAM,CAACyC,EAAE,CAACvC,YAAY,CAACwC,QAAQ,EAAEV,gBAAgB,CAAC;IAClD,OAAQ,YAAM,CAAC,CAAC;EAClB,CAAC,EAAE,CAAChC,MAAM,EAAEgC,gBAAgB,CAAC,CAAC;;EAE9B;AACF;AACA;AACA;AACA;AACA;AACA;;EAGE,oBACErC,KAAA,CAAAgD,aAAA,CAAAhD,KAAA,CAAAiD,QAAA,qBACAjD,KAAA,CAAAgD,aAAA,CAACE,YAAY;IAACC,OAAO,EAAE,SAAAA,QAAA;MAAA,OAAK9B,cAAc,CAAC,IAAI,CAAC;IAAA,CAAC;IAAA+B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,YAAwB,CAAC,eAE5EzD,KAAA,CAAAgD,aAAA,CAAC5C,KAAK;IAACsD,MAAM,EAAEtC,WAAY;IAACuC,cAAc,EAAE,SAAAA,eAAA;MAAA,OAAMtC,cAAc,CAAC,KAAK,CAAC;IAAA,CAAC;IAAA+B,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,IAIjE,CAEL,CAAC;AAEP;AAEA,IAAMP,YAAY,GAAGnD,MAAM,CAAC6D,MAAM,CAAAC,eAAA,KAAAA,eAAA,GAAAC,sBAAA,kiBAsBjC;AAED,eAAe9C,UAAU"},"metadata":{},"sourceType":"module"}