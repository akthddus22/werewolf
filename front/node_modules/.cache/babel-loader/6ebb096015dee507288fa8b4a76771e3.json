{"ast":null,"code":"import _taggedTemplateLiteral from \"/mnt/c/Users/akthd/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/werewolf/werewolf/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"/mnt/c/Users/akthd/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/werewolf/werewolf/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/mnt/c/Users/akthd/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/werewolf/werewolf/front/src/components/useAbility.jsx\",\n  _templateObject;\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nimport styled from \"styled-components\";\nimport React, { useState, useCallback, useEffect } from 'react';\nimport Modal from 'react-modal';\nimport { socket, SocketContext, SOCKET_EVENT } from \"./../service/socket\";\nvar NIGHT_JOB = {\n  WEREWOLF: \"NIGHT_WEREWOLF\",\n  ORACLE: \"NIGHT_ORACLE\",\n  ROBBER: \"NIGHT_ROBBER\",\n  TROUBLEMAKER: \"NIGHT_TROUBLEMAKER\",\n  CITIZEN: \"NIGHT_CITIZEN\",\n  NULL: \"NIGHT_NULL\"\n};\nvar DAY_JOB = {\n  WEREWOLF: \"DAY_WEREWOLF\",\n  ORACLE: \"DAY_ORACLE\",\n  ROBBER: \"DAY_ROBBER\",\n  TROUBLEMAKER: \"DAY_TROUBLEMAKER\",\n  CITIZEN: \"DAY_CITIZEN\",\n  NULL: \"DAY_NULL\"\n};\nfunction UseAbility() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    modalIsOpen = _useState2[0],\n    setModalIsOpen = _useState2[1];\n  var robberAbility = function robberAbility(id) {\n    socket.emit(SOCKET_EVENT.ROBBER, {\n      id: id\n    });\n  };\n  var id_list = [];\n  var troublemakerAbility = function troublemakerAbility(id) {\n    id_list.push(id);\n    if (id_list.length == 2) {\n      socket.emit(SOCKET_EVENT.TROUBLEMAKER, {\n        id_list: id_list\n      });\n      id_list = [];\n    }\n  };\n  var noneAbility = function noneAbility(id) {};\n  var handler = noneAbility;\n  var id_nickname = new Map();\n  var handleJobReceive = function handleJobReceive(pongData) {\n    var job = pongData.j;\n    id_nickname = pongData.id_nickname;\n    console.log(\"Your job is \".concat(job, \".\"));\n    switch (job) {\n      case NIGHT_JOB.ROBBER:\n        handler = robberAbility;\n      case NIGHT_JOB.TROUBLEMAKER:\n        handler = troublemakerAbility;\n      default:\n        handler = noneAbility;\n    }\n    socket.removeAllListeners(SOCKET_EVENT.JOIN_JOB);\n  };\n  useEffect(function () {\n    socket.on(SOCKET_EVENT.JOIN_JOB, handleJobReceive);\n    return function () {};\n  }, [socket, handleJobReceive]);\n\n  /*{for (let key of id_nickname.keys()) {\r\n    return (\r\n      <div>\r\n        <StyledButton onClick={handler(id)}>{nickname}</StyledButton>\r\n      </div>\r\n    );\r\n  }}*/\n\n  function Rendering() {\n    var result = [];\n    var _iterator = _createForOfIteratorHelper(id_nickname.keys()),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var id = _step.value;\n        var nickname = id_nickname.get(id);\n        result.push( /*#__PURE__*/React.createElement(StyledButton, {\n          onClick: handler(id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 19\n          }\n        }, nickname));\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    return result;\n  }\n  ;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(StyledButton, {\n    onClick: function onClick() {\n      return setModalIsOpen(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, \"Modal Open\"), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modalIsOpen,\n    onRequestClose: function onRequestClose() {\n      return setModalIsOpen(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 4\n    }\n  }, console.log(\"It rendered\"), Rendering()));\n}\nvar StyledButton = styled.button(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  margin: 0;\\n  border: none;\\n  cursor: pointer;\\n  font-family: \\\"Noto Sans KR\\\", sans-serif;\\n  font-size: var(--button-font-size, 1rem);\\n  padding: var(--button-padding, 12px 16px);\\n  border-radius: var(--button-radius, 8px);\\n  background: var(--button-bg-color, #0d6efd);\\n  color: var(--button-color, #ffffff);\\n\\n  &:active,\\n  &:hover,\\n  &:focus {\\n    background: var(--button-hover-bg-color, #025ce2);\\n  }\\n\\n  &:disabled {\\n    cursor: default;\\n    opacity: 0.5;\\n    background: var(--button-bg-color, #025ce2);\\n  }\\n\"])));\nexport default UseAbility;","map":{"version":3,"names":["styled","React","useState","useCallback","useEffect","Modal","socket","SocketContext","SOCKET_EVENT","NIGHT_JOB","WEREWOLF","ORACLE","ROBBER","TROUBLEMAKER","CITIZEN","NULL","DAY_JOB","UseAbility","_useState","_useState2","_slicedToArray","modalIsOpen","setModalIsOpen","robberAbility","id","emit","id_list","troublemakerAbility","push","length","noneAbility","handler","id_nickname","Map","handleJobReceive","pongData","job","j","console","log","concat","removeAllListeners","JOIN_JOB","on","Rendering","result","_iterator","_createForOfIteratorHelper","keys","_step","s","n","done","value","nickname","get","createElement","StyledButton","onClick","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","err","e","f","Fragment","isOpen","onRequestClose","button","_templateObject","_taggedTemplateLiteral"],"sources":["/mnt/c/Users/akthd/OneDrive/바탕 화면/werewolf/werewolf/front/src/components/useAbility.jsx"],"sourcesContent":["import styled from \"styled-components\";\r\nimport React, { useState, useCallback, useEffect } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { socket, SocketContext, SOCKET_EVENT } from \"./../service/socket\";\r\n\r\nconst NIGHT_JOB = {\r\n  WEREWOLF: \"NIGHT_WEREWOLF\",\r\n  ORACLE: \"NIGHT_ORACLE\",\r\n  ROBBER: \"NIGHT_ROBBER\",\r\n  TROUBLEMAKER: \"NIGHT_TROUBLEMAKER\",\r\n  CITIZEN: \"NIGHT_CITIZEN\",\r\n  NULL: \"NIGHT_NULL\",\r\n}\r\n\r\nconst DAY_JOB = {\r\n  WEREWOLF: \"DAY_WEREWOLF\",\r\n  ORACLE: \"DAY_ORACLE\",\r\n  ROBBER: \"DAY_ROBBER\",\r\n  TROUBLEMAKER: \"DAY_TROUBLEMAKER\",\r\n  CITIZEN: \"DAY_CITIZEN\",\r\n  NULL: \"DAY_NULL\",\r\n}\r\n\r\nfunction UseAbility() {\r\n  const [modalIsOpen, setModalIsOpen] = useState(false);\r\n\r\n  \r\n\r\n  const robberAbility = id => {\r\n    socket.emit(SOCKET_EVENT.ROBBER, {id: id});\r\n  };\r\n\r\n  let id_list = [];\r\n  const troublemakerAbility = id => {\r\n    id_list.push(id);\r\n    if (id_list.length == 2) {\r\n      socket.emit(SOCKET_EVENT.TROUBLEMAKER, {id_list: id_list});\r\n      id_list = [];\r\n  }};\r\n\r\n  const noneAbility = id => {};\r\n\r\n  let handler = noneAbility;\r\n  let id_nickname = new Map();\r\n  const handleJobReceive = pongData => {\r\n    const job = pongData.j;\r\n    id_nickname = pongData.id_nickname;\r\n\r\n    console.log(`Your job is ${job}.`);\r\n\r\n    switch (job) {\r\n      case NIGHT_JOB.ROBBER:\r\n        handler = robberAbility;\r\n      case NIGHT_JOB.TROUBLEMAKER:\r\n        handler = troublemakerAbility;\r\n      default:\r\n        handler = noneAbility;\r\n    }\r\n\r\n    socket.removeAllListeners(SOCKET_EVENT.JOIN_JOB);\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(SOCKET_EVENT.JOIN_JOB, handleJobReceive);\r\n    return (() => {})\r\n  }, [socket, handleJobReceive]);\r\n\r\n  /*{for (let key of id_nickname.keys()) {\r\n    return (\r\n      <div>\r\n        <StyledButton onClick={handler(id)}>{nickname}</StyledButton>\r\n      </div>\r\n    );\r\n  }}*/\r\n\r\n  function Rendering() {\r\n\r\n    const result = [];\r\n    for (let id of id_nickname.keys()) {\r\n      let nickname = id_nickname.get(id);\r\n      result.push(<StyledButton onClick={handler(id)}>{nickname}</StyledButton>);\r\n    }\r\n    return result;\r\n  };\r\n  \r\n  return (\r\n    <>\r\n    <StyledButton onClick={()=> setModalIsOpen(true)}>Modal Open</StyledButton>\r\n  \r\n\t  <Modal isOpen={modalIsOpen} onRequestClose={() => setModalIsOpen(false)}>\r\n      {console.log(\"It rendered\")}{Rendering()}\r\n    </Modal>\r\n    \r\n    </>\r\n  );\r\n}\r\n\r\nconst StyledButton = styled.button`\r\n  margin: 0;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-family: \"Noto Sans KR\", sans-serif;\r\n  font-size: var(--button-font-size, 1rem);\r\n  padding: var(--button-padding, 12px 16px);\r\n  border-radius: var(--button-radius, 8px);\r\n  background: var(--button-bg-color, #0d6efd);\r\n  color: var(--button-color, #ffffff);\r\n\r\n  &:active,\r\n  &:hover,\r\n  &:focus {\r\n    background: var(--button-hover-bg-color, #025ce2);\r\n  }\r\n\r\n  &:disabled {\r\n    cursor: default;\r\n    opacity: 0.5;\r\n    background: var(--button-bg-color, #025ce2);\r\n  }\r\n`;\r\n\r\nexport default UseAbility;"],"mappings":";;;;;;;AAAA,OAAOA,MAAM,MAAM,mBAAmB;AACtC,OAAOC,KAAK,IAAIC,QAAQ,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAC/D,OAAOC,KAAK,MAAM,aAAa;AAC/B,SAASC,MAAM,EAAEC,aAAa,EAAEC,YAAY,QAAQ,qBAAqB;AAEzE,IAAMC,SAAS,GAAG;EAChBC,QAAQ,EAAE,gBAAgB;EAC1BC,MAAM,EAAE,cAAc;EACtBC,MAAM,EAAE,cAAc;EACtBC,YAAY,EAAE,oBAAoB;EAClCC,OAAO,EAAE,eAAe;EACxBC,IAAI,EAAE;AACR,CAAC;AAED,IAAMC,OAAO,GAAG;EACdN,QAAQ,EAAE,cAAc;EACxBC,MAAM,EAAE,YAAY;EACpBC,MAAM,EAAE,YAAY;EACpBC,YAAY,EAAE,kBAAkB;EAChCC,OAAO,EAAE,aAAa;EACtBC,IAAI,EAAE;AACR,CAAC;AAED,SAASE,UAAUA,CAAA,EAAG;EAAA,IAAAC,SAAA,GACkBhB,QAAQ,CAAC,KAAK,CAAC;IAAAiB,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA9CG,WAAW,GAAAF,UAAA;IAAEG,cAAc,GAAAH,UAAA;EAIlC,IAAMI,aAAa,GAAG,SAAhBA,aAAaA,CAAGC,EAAE,EAAI;IAC1BlB,MAAM,CAACmB,IAAI,CAACjB,YAAY,CAACI,MAAM,EAAE;MAACY,EAAE,EAAEA;IAAE,CAAC,CAAC;EAC5C,CAAC;EAED,IAAIE,OAAO,GAAG,EAAE;EAChB,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAGH,EAAE,EAAI;IAChCE,OAAO,CAACE,IAAI,CAACJ,EAAE,CAAC;IAChB,IAAIE,OAAO,CAACG,MAAM,IAAI,CAAC,EAAE;MACvBvB,MAAM,CAACmB,IAAI,CAACjB,YAAY,CAACK,YAAY,EAAE;QAACa,OAAO,EAAEA;MAAO,CAAC,CAAC;MAC1DA,OAAO,GAAG,EAAE;IAChB;EAAC,CAAC;EAEF,IAAMI,WAAW,GAAG,SAAdA,WAAWA,CAAGN,EAAE,EAAI,CAAC,CAAC;EAE5B,IAAIO,OAAO,GAAGD,WAAW;EACzB,IAAIE,WAAW,GAAG,IAAIC,GAAG,CAAC,CAAC;EAC3B,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAGC,QAAQ,EAAI;IACnC,IAAMC,GAAG,GAAGD,QAAQ,CAACE,CAAC;IACtBL,WAAW,GAAGG,QAAQ,CAACH,WAAW;IAElCM,OAAO,CAACC,GAAG,gBAAAC,MAAA,CAAgBJ,GAAG,MAAG,CAAC;IAElC,QAAQA,GAAG;MACT,KAAK3B,SAAS,CAACG,MAAM;QACnBmB,OAAO,GAAGR,aAAa;MACzB,KAAKd,SAAS,CAACI,YAAY;QACzBkB,OAAO,GAAGJ,mBAAmB;MAC/B;QACEI,OAAO,GAAGD,WAAW;IACzB;IAEAxB,MAAM,CAACmC,kBAAkB,CAACjC,YAAY,CAACkC,QAAQ,CAAC;EAClD,CAAC;EAEDtC,SAAS,CAAC,YAAM;IACdE,MAAM,CAACqC,EAAE,CAACnC,YAAY,CAACkC,QAAQ,EAAER,gBAAgB,CAAC;IAClD,OAAQ,YAAM,CAAC,CAAC;EAClB,CAAC,EAAE,CAAC5B,MAAM,EAAE4B,gBAAgB,CAAC,CAAC;;EAE9B;AACF;AACA;AACA;AACA;AACA;AACA;;EAEE,SAASU,SAASA,CAAA,EAAG;IAEnB,IAAMC,MAAM,GAAG,EAAE;IAAC,IAAAC,SAAA,GAAAC,0BAAA,CACHf,WAAW,CAACgB,IAAI,CAAC,CAAC;MAAAC,KAAA;IAAA;MAAjC,KAAAH,SAAA,CAAAI,CAAA,MAAAD,KAAA,GAAAH,SAAA,CAAAK,CAAA,IAAAC,IAAA,GAAmC;QAAA,IAA1B5B,EAAE,GAAAyB,KAAA,CAAAI,KAAA;QACT,IAAIC,QAAQ,GAAGtB,WAAW,CAACuB,GAAG,CAAC/B,EAAE,CAAC;QAClCqB,MAAM,CAACjB,IAAI,eAAC3B,KAAA,CAAAuD,aAAA,CAACC,YAAY;UAACC,OAAO,EAAE3B,OAAO,CAACP,EAAE,CAAE;UAAAmC,MAAA;UAAAC,QAAA;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA;QAAA,GAAEV,QAAuB,CAAC,CAAC;MAC5E;IAAC,SAAAW,GAAA;MAAAnB,SAAA,CAAAoB,CAAA,CAAAD,GAAA;IAAA;MAAAnB,SAAA,CAAAqB,CAAA;IAAA;IACD,OAAOtB,MAAM;EACf;EAAC;EAED,oBACE5C,KAAA,CAAAuD,aAAA,CAAAvD,KAAA,CAAAmE,QAAA,qBACAnE,KAAA,CAAAuD,aAAA,CAACC,YAAY;IAACC,OAAO,EAAE,SAAAA,QAAA;MAAA,OAAKpC,cAAc,CAAC,IAAI,CAAC;IAAA,CAAC;IAAAqC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,YAAwB,CAAC,eAE5E/D,KAAA,CAAAuD,aAAA,CAACnD,KAAK;IAACgE,MAAM,EAAEhD,WAAY;IAACiD,cAAc,EAAE,SAAAA,eAAA;MAAA,OAAMhD,cAAc,CAAC,KAAK,CAAC;IAAA,CAAC;IAAAqC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACpE1B,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC,EAAEK,SAAS,CAAC,CAClC,CAEL,CAAC;AAEP;AAEA,IAAMa,YAAY,GAAGzD,MAAM,CAACuE,MAAM,CAAAC,eAAA,KAAAA,eAAA,GAAAC,sBAAA,kiBAsBjC;AAED,eAAexD,UAAU"},"metadata":{},"sourceType":"module"}