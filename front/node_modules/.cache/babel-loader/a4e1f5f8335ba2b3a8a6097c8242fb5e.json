{"ast":null,"code":"import { createContext } from \"react\";\nimport socketIo from \"socket.io-client\";\nimport dayjs from \"dayjs\";\nexport var SOCKET_EVENT = {\n  JOIN_ROOM: \"JOIN_ROOM\",\n  UPDATE_NICKNAME: \"UPDATE_NICKNAME\",\n  SEND_MESSAGE: \"SEND_MESSAGE\",\n  RECEIVE_MESSAGE: \"RECEIVE_MESSAGE\",\n  START_GAME: \"START_GAME\",\n  JOIN_JOB: \"JOIN_JOB\"\n};\nexport var NIGHT_JOB = {\n  WEREWOLF1: \"NIGHT_WEREWOLF1\",\n  WEREWOLF2: \"NIGHT_WEREWOLF2\",\n  ORACLE: \"NIGHT_ORACLE\",\n  ROBBER: \"NIGHT_ROBBER\",\n  TROUBLEMAKER: \"NIGHT_TROUBLEMAKER\",\n  CITIZEN1: \"NIGHT_CITIZEN1\",\n  CITIZEN2: \"NIGHT_CITIZEN2\",\n  CITIZEN3: \"NIGHT_CITIZEN3\",\n  NULL: \"NIGHT_NULL\"\n};\nexport var DAY_JOB = {\n  WEREWOLF1: \"DAY_WEREWOLF1\",\n  WEREWOLF2: \"DAY_WEREWOLF2\",\n  ORACLE: \"DAY_ORACLE\",\n  ROBBER: \"DAY_ROBBER\",\n  TROUBLEMAKER: \"DAY_TROUBLEMAKER\",\n  CITIZEN1: \"DAY_CITIZEN1\",\n  CITIZEN2: \"DAY_CITIZEN2\",\n  CITIZEN3: \"DAY_CITIZEN3\",\n  NULL: \"DAY_NULL\"\n};\nexport var socket = socketIo(String(process.env.REACT_APP_BACK_URL));\nexport var SocketContext = createContext(socket);\nexport var job = \"\";\nexport var makeMessage = function makeMessage(pongData) {\n  var prevNickname = pongData.prevNickname,\n    nickname = pongData.nickname,\n    content = pongData.content,\n    type = pongData.type,\n    time = pongData.time;\n  var nicknameLabel;\n  var contentLabel = \"\";\n  switch (type) {\n    case SOCKET_EVENT.JOIN_ROOM:\n      {\n        contentLabel = \"\".concat(nickname, \" has join the room.\");\n        break;\n      }\n    case SOCKET_EVENT.UPDATE_NICKNAME:\n      {\n        contentLabel = \"User's name has been changed.\\n\".concat(prevNickname, \" => \").concat(nickname, \".\");\n        break;\n      }\n    case SOCKET_EVENT.SEND_MESSAGE:\n      {\n        contentLabel = String(content);\n        nicknameLabel = nickname;\n        break;\n      }\n    default:\n  }\n  return {\n    nickname: nicknameLabel,\n    content: contentLabel,\n    time: dayjs(time).format(\"HH:mm\")\n  };\n};\nsocket.on(\"connect\", function () {\n  console.log(\"socket server connected.\");\n});\nsocket.on(\"disconnect\", function () {\n  console.log(\"socket server disconnected.\");\n});\nsocket.on(SOCKET_EVENT.JOIN_JOB, function (requestData) {\n  job = requestData.j;\n  console.log(job);\n});","map":{"version":3,"names":["createContext","socketIo","dayjs","SOCKET_EVENT","JOIN_ROOM","UPDATE_NICKNAME","SEND_MESSAGE","RECEIVE_MESSAGE","START_GAME","JOIN_JOB","NIGHT_JOB","WEREWOLF1","WEREWOLF2","ORACLE","ROBBER","TROUBLEMAKER","CITIZEN1","CITIZEN2","CITIZEN3","NULL","DAY_JOB","socket","String","process","env","REACT_APP_BACK_URL","SocketContext","job","makeMessage","pongData","prevNickname","nickname","content","type","time","nicknameLabel","contentLabel","concat","format","on","console","log","requestData","j"],"sources":["/mnt/c/Users/akthd/OneDrive/바탕 화면/werewolf/werewolf/front/src/service/socket.js"],"sourcesContent":["import { createContext } from \"react\";\r\nimport socketIo from \"socket.io-client\";\r\nimport dayjs from \"dayjs\";\r\n\r\nexport const SOCKET_EVENT = {\r\n    JOIN_ROOM: \"JOIN_ROOM\",\r\n    UPDATE_NICKNAME: \"UPDATE_NICKNAME\",\r\n    SEND_MESSAGE: \"SEND_MESSAGE\",\r\n    RECEIVE_MESSAGE: \"RECEIVE_MESSAGE\",\r\n    START_GAME: \"START_GAME\",\r\n    JOIN_JOB: \"JOIN_JOB\",\r\n};\r\n\r\nexport const NIGHT_JOB = {\r\n    WEREWOLF1: \"NIGHT_WEREWOLF1\",\r\n    WEREWOLF2: \"NIGHT_WEREWOLF2\",\r\n    ORACLE: \"NIGHT_ORACLE\",\r\n    ROBBER: \"NIGHT_ROBBER\",\r\n    TROUBLEMAKER: \"NIGHT_TROUBLEMAKER\",\r\n    CITIZEN1: \"NIGHT_CITIZEN1\",\r\n    CITIZEN2: \"NIGHT_CITIZEN2\",\r\n    CITIZEN3: \"NIGHT_CITIZEN3\",\r\n    NULL: \"NIGHT_NULL\",\r\n}\r\n\r\nexport const DAY_JOB = {\r\n    WEREWOLF1: \"DAY_WEREWOLF1\",\r\n    WEREWOLF2: \"DAY_WEREWOLF2\",\r\n    ORACLE: \"DAY_ORACLE\",\r\n    ROBBER: \"DAY_ROBBER\",\r\n    TROUBLEMAKER: \"DAY_TROUBLEMAKER\",\r\n    CITIZEN1: \"DAY_CITIZEN1\",\r\n    CITIZEN2: \"DAY_CITIZEN2\",\r\n    CITIZEN3: \"DAY_CITIZEN3\",\r\n    NULL: \"DAY_NULL\",\r\n}\r\n\r\nexport const socket = socketIo(String(process.env.REACT_APP_BACK_URL));\r\nexport const SocketContext = createContext(socket);\r\nexport let job = \"\";\r\n\r\nexport const makeMessage = pongData => {\r\n    const { prevNickname, nickname, content, type, time } = pongData;\r\n\r\n    let nicknameLabel;\r\n    let contentLabel=\"\";\r\n\r\n    switch (type) {\r\n        case SOCKET_EVENT.JOIN_ROOM: {\r\n            contentLabel = `${nickname} has join the room.`;\r\n            break;\r\n        }\r\n        case SOCKET_EVENT.UPDATE_NICKNAME: {\r\n            contentLabel = `User's name has been changed.\\n${prevNickname} => ${nickname}.`\r\n            break;\r\n        }\r\n        case SOCKET_EVENT.SEND_MESSAGE: {\r\n            contentLabel = String(content);\r\n            nicknameLabel = nickname;\r\n            break;\r\n        }\r\n        default:\r\n    }\r\n\r\n    return {\r\n        nickname: nicknameLabel,\r\n        content: contentLabel,\r\n        time: dayjs(time).format(\"HH:mm\"),\r\n    }\r\n}\r\n\r\nsocket.on(\"connect\", () => {\r\n  console.log(\"socket server connected.\");\r\n});\r\n\r\nsocket.on(\"disconnect\", () => {\r\n  console.log(\"socket server disconnected.\");\r\n});\r\n\r\nsocket.on(SOCKET_EVENT.JOIN_JOB, function (requestData) {\r\n    job = requestData.j;\r\n    console.log(job);\r\n});"],"mappings":"AAAA,SAASA,aAAa,QAAQ,OAAO;AACrC,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAO,IAAMC,YAAY,GAAG;EACxBC,SAAS,EAAE,WAAW;EACtBC,eAAe,EAAE,iBAAiB;EAClCC,YAAY,EAAE,cAAc;EAC5BC,eAAe,EAAE,iBAAiB;EAClCC,UAAU,EAAE,YAAY;EACxBC,QAAQ,EAAE;AACd,CAAC;AAED,OAAO,IAAMC,SAAS,GAAG;EACrBC,SAAS,EAAE,iBAAiB;EAC5BC,SAAS,EAAE,iBAAiB;EAC5BC,MAAM,EAAE,cAAc;EACtBC,MAAM,EAAE,cAAc;EACtBC,YAAY,EAAE,oBAAoB;EAClCC,QAAQ,EAAE,gBAAgB;EAC1BC,QAAQ,EAAE,gBAAgB;EAC1BC,QAAQ,EAAE,gBAAgB;EAC1BC,IAAI,EAAE;AACV,CAAC;AAED,OAAO,IAAMC,OAAO,GAAG;EACnBT,SAAS,EAAE,eAAe;EAC1BC,SAAS,EAAE,eAAe;EAC1BC,MAAM,EAAE,YAAY;EACpBC,MAAM,EAAE,YAAY;EACpBC,YAAY,EAAE,kBAAkB;EAChCC,QAAQ,EAAE,cAAc;EACxBC,QAAQ,EAAE,cAAc;EACxBC,QAAQ,EAAE,cAAc;EACxBC,IAAI,EAAE;AACV,CAAC;AAED,OAAO,IAAME,MAAM,GAAGpB,QAAQ,CAACqB,MAAM,CAACC,OAAO,CAACC,GAAG,CAACC,kBAAkB,CAAC,CAAC;AACtE,OAAO,IAAMC,aAAa,GAAG1B,aAAa,CAACqB,MAAM,CAAC;AAClD,OAAO,IAAIM,GAAG,GAAG,EAAE;AAEnB,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAGC,QAAQ,EAAI;EAAA,IAC3BC,YAAY,GAAoCD,QAAQ,CAAxDC,YAAY;IAAEC,QAAQ,GAA0BF,QAAQ,CAA1CE,QAAQ;IAAEC,OAAO,GAAiBH,QAAQ,CAAhCG,OAAO;IAAEC,IAAI,GAAWJ,QAAQ,CAAvBI,IAAI;IAAEC,IAAI,GAAKL,QAAQ,CAAjBK,IAAI;EAEnD,IAAIC,aAAa;EACjB,IAAIC,YAAY,GAAC,EAAE;EAEnB,QAAQH,IAAI;IACR,KAAK9B,YAAY,CAACC,SAAS;MAAE;QACzBgC,YAAY,MAAAC,MAAA,CAAMN,QAAQ,wBAAqB;QAC/C;MACJ;IACA,KAAK5B,YAAY,CAACE,eAAe;MAAE;QAC/B+B,YAAY,qCAAAC,MAAA,CAAqCP,YAAY,UAAAO,MAAA,CAAON,QAAQ,MAAG;QAC/E;MACJ;IACA,KAAK5B,YAAY,CAACG,YAAY;MAAE;QAC5B8B,YAAY,GAAGd,MAAM,CAACU,OAAO,CAAC;QAC9BG,aAAa,GAAGJ,QAAQ;QACxB;MACJ;IACA;EACJ;EAEA,OAAO;IACHA,QAAQ,EAAEI,aAAa;IACvBH,OAAO,EAAEI,YAAY;IACrBF,IAAI,EAAEhC,KAAK,CAACgC,IAAI,CAAC,CAACI,MAAM,CAAC,OAAO;EACpC,CAAC;AACL,CAAC;AAEDjB,MAAM,CAACkB,EAAE,CAAC,SAAS,EAAE,YAAM;EACzBC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;AACzC,CAAC,CAAC;AAEFpB,MAAM,CAACkB,EAAE,CAAC,YAAY,EAAE,YAAM;EAC5BC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;AAC5C,CAAC,CAAC;AAEFpB,MAAM,CAACkB,EAAE,CAACpC,YAAY,CAACM,QAAQ,EAAE,UAAUiC,WAAW,EAAE;EACpDf,GAAG,GAAGe,WAAW,CAACC,CAAC;EACnBH,OAAO,CAACC,GAAG,CAACd,GAAG,CAAC;AACpB,CAAC,CAAC"},"metadata":{},"sourceType":"module"}